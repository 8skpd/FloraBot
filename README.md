# üåø Plant & Mushroom Recognition Telegram Bot

**–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.**

![Version](https://img.shields.io/badge/version-5.0-blue)
![Python](https://img.shields.io/badge/python-3.9+-green)
![Status](https://img.shields.io/badge/status-production--ready-brightgreen)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [API –∏ –º–æ–¥—É–ª–∏](#api-–∏-–º–æ–¥—É–ª–∏)
- [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [–†–µ–∂–∏–º—ã –∞–Ω–∞–ª–∏–∑–∞](#—Ä–µ–∂–∏–º—ã-–∞–Ω–∞–ª–∏–∑–∞)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Perplexity API** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤ –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ‚úÖ **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤** - –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∞
- ‚úÖ **–î–≤–µ –≤–µ—Ä—Å–∏–∏ –∞–Ω–∞–ª–∏–∑–∞** - –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è (–±—ã—Å—Ç—Ä–∞—è) –∏ –ø–ª–∞—Ç–Ω–∞—è (—Ç–æ—á–Ω–∞—è)
- ‚úÖ **–†—É—Å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **Production-ready** - –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ** | –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤ |
| **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∞** | –í—ã–¥–∞–µ—Ç —Ä—É—Å—Å–∫–æ–µ –∏ –ª–∞—Ç–∏–Ω—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
| **–°–µ–º–µ–π—Å—Ç–≤–æ** | –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ–º–µ–π—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞ |
| **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** | –û–ø–∏—Å—ã–≤–∞–µ—Ç 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ |
| **–ú–µ—Å—Ç–æ –æ–±–∏—Ç–∞–Ω–∏—è** | –ì–æ–≤–æ—Ä–∏—Ç –≥–¥–µ —Ä–∞—Å—Ç–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º |
| **–°—ä–µ–¥–æ–±–Ω–æ—Å—Ç—å** | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—ä–µ–¥–æ–±–µ–Ω –ª–∏ –≥—Ä–∏–±/—Ä–∞—Å—Ç–µ–Ω–∏–µ |
| **–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã** | –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç 3 –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–∞ |
| **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç % —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ |

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –∏ –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/mode` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –∏ –ø–ª–∞—Ç–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
- `/stats` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ–∂–∏–º—ã –∞–Ω–∞–ª–∏–∑–∞

- **üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π (FREE)** - GigaChat-–ø–æ–¥–æ–±–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (5-7 —Å–µ–∫)
- **üíé –ü–ª–∞—Ç–Ω—ã–π (PAID)** - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Perplexity (10-15 —Å–µ–∫)

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```
Python:         3.9 –∏–ª–∏ –≤—ã—à–µ
OS:             Linux, macOS, Windows
–ü–∞–º—è—Ç—å:         512 MB –º–∏–Ω–∏–º—É–º
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç:       –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
```

### Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```
python-telegram-bot >= 21.6
openai >= 1.0.0
python-dotenv >= 1.0.0
```

### API –∫–ª—é—á–∏

–í–∞–º –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è:

1. **Telegram Bot Token** - –æ—Ç @BotFather –≤ Telegram
2. **Perplexity API Key** - –æ—Ç https://www.perplexity.ai/api

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Git
git clone https://github.com/yourusername/plant-bot.git
cd plant-bot

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# Linux/macOS
python3 -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

–ï—Å–ª–∏ `requirements.txt` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
pip install python-telegram-bot openai python-dotenv
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
python --version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3.9+
pip list | grep -E "telegram|openai|dotenv"  # –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
```

---

## üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

#### 1. Telegram Bot Token

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
# 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start
# 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot
# 4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
# 5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤–∏–¥–∞: 1234567890:ABCDefGhIjKlMnOpQrStUvWxYzAbCdEfGhIjK
```

#### 2. Perplexity API Key

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.perplexity.ai/api
# 2. –õ–æ–≥–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
# 3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
# 4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤–∏–¥–∞: pplx-XXXXXXXXXXXXXXXXXXXXXXXXXXXX
```

### –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ —à–∞–±–ª–æ–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cp .env.example .env
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cat > .env << EOF
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
PERPLEXITY_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
EOF
```

#### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ .env

```env
# ü§ñ TELEGRAM BOT TOKEN
# –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç @BotFather –≤ Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCDefGhIjKlMnOpQrStUvWxYzAbCdEfGhIjK

# üîµ PERPLEXITY API KEY
# –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç https://www.perplexity.ai/api
PERPLEXITY_API_KEY=pplx-XXXXXXXXXXXXXXXXXXXXXXXXXXXX

# üì± –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LOG_LEVEL=INFO
API_TIMEOUT=60
DEBUG_MODE=false
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
test -f .env && echo "‚úÖ .env —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω" || echo "‚ùå .env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
print('‚úÖ TELEGRAM_BOT_TOKEN:', '–î–ê' if os.getenv('TELEGRAM_BOT_TOKEN') else '–ù–ï–¢')
print('‚úÖ PERPLEXITY_API_KEY:', '–î–ê' if os.getenv('PERPLEXITY_API_KEY') else '–ù–ï–¢')
"
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
plant-recognition-bot/
‚îÇ
‚îú‚îÄ‚îÄ üöÄ –û–°–ù–û–í–ù–´–ï –§–ê–ô–õ–´
‚îÇ   ‚îú‚îÄ‚îÄ bot.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ models.py              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ identifier.py          # –ê–≥–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ handlers.py            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
‚îÇ   ‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îÇ   ‚îú‚îÄ‚îÄ .env.example           # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore             # –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ
‚îú‚îÄ‚îÄ üìñ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø
‚îÇ   ‚îú‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ MIGRATION.md           # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ üìä –î–†–£–ì–ò–ï
    ‚îú‚îÄ‚îÄ __pycache__/           # –ö–µ—à Python (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îî‚îÄ‚îÄ *.log                  # –õ–æ–≥–∏ (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏ —Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º)
```

### –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

#### 1. **bot.py** (75 —Å—Ç—Ä–æ–∫)
–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ö–ª–∞—Å—Å `PlantRecognitionBot`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã (`run()`)
- –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python bot.py
```

#### 2. **models.py** (70 —Å—Ç—Ä–æ–∫)
–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- `AnalysisMode(Enum)` - –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ (FREE, PAID)
- `AnalysisResult(dataclass)` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è
- `UserData(dataclass)` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `AnalysisResult.to_message()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è Telegram

#### 3. **identifier.py** (200 —Å—Ç—Ä–æ–∫)
–ê–≥–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Perplexity API.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ö–ª–∞—Å—Å `IdentifierAgent`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Perplexity API
- JSON –ø–∞—Ä—Å–∏–Ω–≥
- –û–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `identify(image_path, mode)` - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ
- `_get_prompt(mode)` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç
- `_parse_response(text)` - –ø–∞—Ä—Å–∏—Ç JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞
- `_parse_confidence(str)` - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —á–∏—Å–ª–æ

#### 4. **handlers.py** (380 —Å—Ç—Ä–æ–∫)
–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram –±–æ—Ç–∞.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ö–ª–∞—Å—Å `BotHandlers`
- 4 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–æ–º–∞–Ω–¥
- 4 callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫
- –û–±—Ä–∞–±–æ—Ç–∫—É —Ñ–æ—Ç–æ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–ú–µ—Ç–æ–¥—ã –∫–æ–º–∞–Ω–¥:**
- `start_handler()` - /start
- `help_handler()` - /help
- `mode_handler()` - /mode
- `stats_handler()` - /stats

---

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
pip install -r requirements.txt

# 2. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python bot.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
======================================================================
üîß –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–û–¢–ê
======================================================================
‚úÖ Telegram —Ç–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω
‚úÖ Perplexity API –≥–æ—Ç–æ–≤

======================================================================
üöÄ –ë–û–¢ –ó–ê–ü–£–©–ï–ù –ò –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï!
======================================================================

üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
   1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
   2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞
   3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start
   4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏–ª–∏ –ø–ª–∞—Ç–Ω—ã–π)
   5. –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–æ—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏–π/–≥—Ä–∏–±–æ–≤

üí° –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Telegram

#### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –ø–æ @username (–∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–æ–∑–¥–∞–ª–∏ –≤ @BotFather)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞ (–∫–Ω–æ–ø–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ)
5. –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–æ—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤!

#### –û—Å–Ω–æ–≤–Ω–æ–π workflow

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                    –ë–æ—Ç
    |                            |
    |-- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /start -----> |
    |                   –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º
    |<-- –∫–Ω–æ–ø–∫–∏ (FREE/PAID) -----|
    |                            |
    |-- –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É -------> |
    |                  —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∂–∏–º
    |<-- –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ---------|
    |                            |
    |-- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ -------> |
    |                  –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ
    |                  (5-7 –∏–ª–∏ 10-15 —Å–µ–∫)
    |<-- —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ ------|
    |                            |
    |-- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ—â–µ —Ñ–æ—Ç–æ ---> |
    |     (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è)           |
```

---

## üîß API –∏ –º–æ–¥—É–ª–∏

### –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏

#### AnalysisMode

```python
from models import AnalysisMode

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
mode = AnalysisMode.PAID  # –∏–ª–∏ AnalysisMode.FREE
print(mode.value)  # "paid" –∏–ª–∏ "free"
```

#### AnalysisResult

```python
from models import AnalysisResult

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
result = AnalysisResult(
    common_name="–ë–µ–ª—ã–π –≥—Ä–∏–±",
    scientific_name="Boletus edulis",
    organism_type="–≥—Ä–∏–±",
    confidence=0.95,
    characteristics=["–ë–µ–ª–∞—è –Ω–æ–∂–∫–∞", "–ö–æ—Ä–∏—á–Ω–µ–≤–∞—è —à–ª—è–ø–∫–∞"],
    habitat="–õ–∏—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–µ—Å–∞",
    edibility="—Å—ä–µ–¥–æ–±–µ–Ω",
    interesting_facts=["–î–æ—Ä–æ–≥–æ–π –¥–µ–ª–∏–∫–∞—Ç–µ—Å"],
    family="Boletus"
)

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞
message = result.to_message()
```

#### UserData

```python
from models import AnalysisMode, UserData

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = UserData(
    user_id=12345,
    mode=AnalysisMode.PAID,
    total_images=10,
    total_tokens_used=5000
)

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Å–ª–æ–≤–∞—Ä—å
data_dict = user.to_dict()
```

### –†–∞–±–æ—Ç–∞ —Å IdentifierAgent

```python
from identifier import IdentifierAgent
from models import AnalysisMode

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
agent = IdentifierAgent()

# –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –≤ –ø–ª–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ
result, tokens = agent.identify("/path/to/image.jpg", AnalysisMode.PAID)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
print(f"–†–∞—Å—Ç–µ–Ω–∏–µ: {result.common_name}")
print(f"–ù–∞—É—á–Ω–æ–µ –∏–º—è: {result.scientific_name}")
print(f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤: {tokens}")
```

### –†–∞–±–æ—Ç–∞ —Å BotHandlers

```python
from handlers import BotHandlers
from identifier import IdentifierAgent

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
identifier = IdentifierAgent()
user_data = {}
handlers = BotHandlers(identifier, user_data)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ telegram.ext
# (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ bot.py)
```

---

## üìû –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### /start - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

```
–ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞.

–û—Ç–≤–µ—Ç:
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
–≠—Ç–æ –±–æ—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤! üåøüçÑ

üéØ –ß—Ç–æ —è —É–º–µ—é:
‚Ä¢ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏—è –∏ –≥—Ä–∏–±—ã –ø–æ —Ñ–æ—Ç–æ
‚Ä¢ –í—ã–¥–∞–≤–∞—Ç—å –Ω–∞—É—á–Ω–æ–µ –ª–∞—Ç–∏–Ω—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
‚Ä¢ –†–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—ä–µ–¥–æ–±–Ω–æ—Å—Ç—å

[–ö–Ω–æ–ø–∫–∞: üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º] [–ö–Ω–æ–ø–∫–∞: üíé –ü–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º]
```

### /help - –°–ø—Ä–∞–≤–∫–∞

```
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

–û—Ç–≤–µ—Ç:
üìñ –ò–ù–°–¢–†–£–ö–¶–ò–Ø

1Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º (/mode)
   üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π - –±—ã—Å—Ç—Ä–æ
   üíé –ü–ª–∞—Ç–Ω—ã–π - —Ç–æ—á–Ω–µ–µ

2Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ
   ‚Ä¢ –†–∞—Å—Ç–µ–Ω–∏—è –∏–ª–∏ –≥—Ä–∏–±—ã
   ‚Ä¢ –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ üì∏
   ‚Ä¢ –í–∏–¥–Ω—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

3Ô∏è‚É£ –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–Ω–∞–ª–∏–∑–∞
   ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π: 5-7 —Å–µ–∫
   ‚Ä¢ –ü–ª–∞—Ç–Ω—ã–π: 10-15 —Å–µ–∫

...
```

### /mode - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

```
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –∏ –ø–ª–∞—Ç–Ω—ã–º —Ä–µ–∂–∏–º–∞–º–∏.

–û—Ç–≤–µ—Ç:
–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞:

–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: üíé –ü–õ–ê–¢–ù–´–ô

üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º
   ‚úì –ë—ã—Å—Ç—Ä—ã–π (~5-7 —Å–µ–∫)
   ‚úì –ë–∞–∑–æ–≤–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
   ‚úì –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã
   
üíé –ü–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º
   ‚úì –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
   ‚úì –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
   ‚úì –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   ‚è±Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (~10-15 —Å–µ–∫)
```

### /stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞.

–û—Ç–≤–µ—Ç:
üìä –í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

üíé –†–µ–∂–∏–º: –ü–ª–∞—Ç–Ω—ã–π
üì∏ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–æ—Ç–æ: 5
üî¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤: 2150

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /mode –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
```

---

## üìä –†–µ–∂–∏–º—ã –∞–Ω–∞–ª–∏–∑–∞

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π | üíé –ü–ª–∞—Ç–Ω—ã–π |
|----------|---------------|-----------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 5-7 —Å–µ–∫ | 10-15 —Å–µ–∫ |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | –ë–∞–∑–æ–≤–∞—è | –í—ã—Å–æ–∫–∞—è |
| **–¢–æ–∫–µ–Ω—ã** | 400-600 | 800-1000 |
| **–ü—Ä–æ–º–ø—Ç** | –ö—Ä–∞—Ç–∫–∏–π | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π |
| **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** | 2-3 | 3-5 |
| **–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã** | 1 | 3 |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | 0$ | 0.01-0.02$ |

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ–∂–∏–º—ã

#### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º (FREE)

```python
# –ü—Ä–æ–º–ø—Ç
prompt = """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–æ—Ç–æ –∏ –≤–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON:
{
    "common_name": "–Ω–∞–∑–≤–∞–Ω–∏–µ",
    "scientific_name": "–≤–∏–¥",
    ...
}"""

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API
temperature=0.1  # –ë–æ–ª–µ–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
max_tokens=600   # –ú–µ–Ω—å—à–µ —Ç–µ–∫—Å—Ç–∞
```

#### –ü–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º (PAID)

```python
# –ü—Ä–æ–º–ø—Ç
prompt = """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–æ—Ç–æ —Ä–∞—Å—Ç–µ–Ω–∏—è, –≥—Ä–∏–±–∞... –û–ß–ï–ù–¨ –¢–©–ê–¢–ï–õ–¨–ù–û...
{
    "common_name": "—Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
    "scientific_name": "–ª–∞—Ç–∏–Ω—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∞",
    "family": "–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º–µ–π—Å—Ç–≤–∞",
    ...
    "interesting_facts": ["–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç 1", "—Ñ–∞–∫—Ç 2", "—Ñ–∞–∫—Ç 3"]
}

–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç - –≤—Å–µ —Ä–∞–≤–Ω–æ –≤–µ—Ä–Ω–∏ JSON —Å best guess –∏ –Ω–∏–∑–∫–∏–º confidence."""

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API
temperature=0.2  # –ë–æ–ª–µ–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π
max_tokens=1000  # –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –±–µ–ª–æ–≥–æ –≥—Ä–∏–±–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –±–µ–ª–æ–≥–æ –≥—Ä–∏–±–∞

–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:
üîç –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ù–∞–∑–≤–∞–Ω–∏–µ: –ë–µ–ª—ã–π –≥—Ä–∏–±
–ù–∞—É—á–Ω–æ–µ –∏–º—è: Boletus edulis
–°–µ–º–µ–π—Å—Ç–≤–æ: Boletaceae
–¢–∏–ø: –≥—Ä–∏–±

üìä –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 95%

üå± –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
‚Ä¢ –ë–µ–ª–∞—è –∏–ª–∏ –∫—Ä–µ–º–æ–≤–∞—è –Ω–æ–∂–∫–∞
‚Ä¢ –ö–æ—Ä–∏—á–Ω–µ–≤–∞—è –∏–ª–∏ —Å–≤–µ—Ç–ª–∞—è —à–ª—è–ø–∫–∞
‚Ä¢ –ñ–µ–ª—Ç—ã–µ —Ç—Ä—É–±–æ—á–∫–∏ –ø–æ–¥ —à–ª—è–ø–∫–æ–π
‚Ä¢ –¢—Ä—É–±–æ—á–∫–∏ –º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–¥–∞–≤–ª–∏–≤–∞–Ω–∏–∏
‚Ä¢ –°–µ—Ç—á–∞—Ç—ã–π —Ä–∏—Å—É–Ω–æ–∫ –Ω–∞ –Ω–æ–∂–∫–µ

üè† –ú–µ—Å—Ç–æ –æ–±–∏—Ç–∞–Ω–∏—è: –õ–∏—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Ö–≤–æ–π–Ω—ã–µ –ª–µ—Å–∞

üçÑ –°—ä–µ–¥–æ–±–Ω–æ—Å—Ç—å: –°—ä–µ–¥–æ–±–µ–Ω, –æ—á–µ–Ω—å —Ü–µ–Ω–Ω—ã–π –¥–µ–ª–∏–∫–∞—Ç–µ—Å

‚ú® –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã:
‚Ä¢ –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö –≥—Ä–∏–±–æ–≤
‚Ä¢ –ú–æ–∂–µ—Ç –≤—ã—Ä–∞—Å—Ç–∞—Ç—å –¥–æ 30 —Å–º –≤ –≤—ã—Å–æ—Ç—É
‚Ä¢ –ù–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Ä–∞–¥–∏–∞—Ü–∏—é

üíé –†–µ–∂–∏–º: –ü–ª–∞—Ç–Ω—ã–π
‚Ä¢ –¢–æ–∫–µ–Ω–æ–≤: 823
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–Ω–∞–ª–∏–∑ –ª–∏—Å—Ç–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –ª–∏—Å—Ç–∞ –±–µ—Ä–µ–∑—ã

–ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:
üîç –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ù–∞–∑–≤–∞–Ω–∏–µ: –ë–µ—Ä–µ–∑–∞ –ø–æ–≤–∏—Å–ª–∞—è (–ë–µ—Ä–µ–∑–∞ –±–æ—Ä–æ–¥–∞–≤—á–∞—Ç–∞—è)
–ù–∞—É—á–Ω–æ–µ –∏–º—è: Betula pendula
–°–µ–º–µ–π—Å—Ç–≤–æ: Betulaceae
–¢–∏–ø: —Ä–∞—Å—Ç–µ–Ω–∏–µ

üìä –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 88%

üå± –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
‚Ä¢ –†–æ–º–±–æ–≤–∏–¥–Ω—ã–µ –ª–∏—Å—Ç—å—è
‚Ä¢ –î–≤–∞–∂–¥—ã –ø–∏–ª—å—á–∞—Ç—ã–π –∫—Ä–∞–π –ª–∏—Å—Ç–∞
‚Ä¢ –°–º–æ–ª–∏—Å—Ç—ã–µ –∂–µ–ª–µ–∑–∫–∏ –Ω–∞ –º–æ–ª–æ–¥—ã—Ö –ø–æ–±–µ–≥–∞—Ö
‚Ä¢ –ë–µ–ª–∞—è –∫–æ—Ä–∞ —Å —á–µ—Ä–Ω—ã–º–∏ –æ—Ç–º–µ—Ç–∏–Ω–∞–º–∏
‚Ä¢ –°–ª–µ–≥–∫–∞ –ø–æ–Ω–∏–∫–∞—é—â–∏–µ –≤–µ—Ç–≤–∏

üè† –ú–µ—Å—Ç–æ –æ–±–∏—Ç–∞–Ω–∏—è: –õ–µ—Å–æ—Å—Ç–µ–ø–∏, –ª–µ—Å–∞, –ø–∞—Ä–∫–∏, –ª–µ—Å–æ–ø–æ–ª–æ—Å—ã

üçÑ –°—ä–µ–¥–æ–±–Ω–æ—Å—Ç—å: –ù–µ —Å—ä–µ–¥–æ–±–Ω–∞ (—ç—Ç–æ –¥–µ—Ä–µ–≤–æ, –Ω–µ –≥—Ä–∏–±)

‚ú® –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã:
‚Ä¢ –°–≤—è—â–µ–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –≤ —Å–ª–∞–≤—è–Ω—Å–∫–æ–π –∫—É–ª—å—Ç—É—Ä–µ
‚Ä¢ –î—Ä–µ–≤–µ—Å–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–Ω–µ—Ä—ã
‚Ä¢ –ë–µ—Ä–µ–∑–æ–≤—ã–π —Å–æ–∫ –º–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –≤–µ—Å–Ω–æ–π

üÜì –†–µ–∂–∏–º: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
‚Ä¢ –¢–æ–∫–µ–Ω–æ–≤: 512
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Telegram User                             ‚îÇ
‚îÇ                    (–≤ Telegram)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚îÇ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Telegram Bot API (python-telegram-bot)             ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–æ–º–∞–Ω–¥—ã                            ‚îÇ
‚îÇ  ‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã                                        ‚îÇ
‚îÇ  ‚Ä¢ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ (callback_query)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–∞ –Ω—É–∂–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  bot.py - PlantRecognitionBot               ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏                                ‚îÇ
‚îÇ  ‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª (run_polling)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã –∏–∑
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            handlers.py - BotHandlers                         ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥:                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ start_handler() ‚Üí –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ help_handler() ‚Üí —Å–ø—Ä–∞–≤–∫–∞                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ mode_handler() ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ stats_handler() ‚Üí —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞                       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–¥–ª—è –∫–Ω–æ–ø–æ–∫):                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ callback_mode_free/paid()                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ callback_set_mode_free/paid()                      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–µ–¥–∏–∞:                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ photo_handler() ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ text_handler() ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞                ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         identifier.py - IdentifierAgent                      ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ identify(image_path, mode)                              ‚îÇ
‚îÇ    ‚îÇ                                                        ‚îÇ
‚îÇ    ‚îú‚îÄ‚Üí –ö–æ–¥–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ base64                      ‚îÇ
‚îÇ    ‚îÇ                                                        ‚îÇ
‚îÇ    ‚îú‚îÄ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç (_get_prompt)                    ‚îÇ
‚îÇ    ‚îÇ                                                        ‚îÇ
‚îÇ    ‚îî‚îÄ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ Perplexity API               ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ _parse_response(text)                                    ‚îÇ
‚îÇ    ‚îî‚îÄ‚Üí –ü–∞—Ä—Å–∏—Ç JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              models.py - Data Classes                        ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ AnalysisMode(Enum) - —Ä–µ–∂–∏–º—ã –∞–Ω–∞–ª–∏–∑–∞                     ‚îÇ
‚îÇ  ‚Ä¢ AnalysisResult(dataclass) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç                   ‚îÇ
‚îÇ  ‚Ä¢ UserData(dataclass) - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              handlers.py - photo_handler                     ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚Ä¢ –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (result.to_message())             ‚îÇ
‚îÇ  ‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Telegram Bot API (python-telegram-bot)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Telegram User                             ‚îÇ
‚îÇ                (–ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç)                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

```
bot.py
  ‚îÇ
  ‚îú‚îÄ‚Üí models.py
  ‚îÇ   ‚îî‚îÄ‚Üí dataclasses (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îî‚îÄ‚Üí enum (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ
  ‚îú‚îÄ‚Üí identifier.py
  ‚îÇ   ‚îú‚îÄ‚Üí os (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí base64 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí json (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí re (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí models.py
  ‚îÇ   ‚îî‚îÄ‚Üí openai (–≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
  ‚îÇ
  ‚îú‚îÄ‚Üí handlers.py
  ‚îÇ   ‚îú‚îÄ‚Üí os (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí tempfile (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å)
  ‚îÇ   ‚îú‚îÄ‚Üí models.py
  ‚îÇ   ‚îú‚îÄ‚Üí identifier.py
  ‚îÇ   ‚îî‚îÄ‚Üí telegram (–≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
  ‚îÇ
  ‚îú‚îÄ‚Üí telegram (–≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
  ‚îú‚îÄ‚Üí dotenv (–≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
  ‚îî‚îÄ‚Üí logging (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ handlers.py

```python
# –í –∫–ª–∞—Å—Å–µ BotHandlers –¥–æ–±–∞–≤—å—Ç–µ:

async def about_handler(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /about"""
    message = """
üìã –û –ë–û–¢–ï

–≠—Ç–æ –±–æ—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ –≥—Ä–∏–±–æ–≤.

üöÄ –í–µ—Ä—Å–∏—è: 5.0
üë®‚Äçüíª –ê–≤—Ç–æ—Ä: –í–∞—à–µ –∏–º—è
üìß Email: –≤–∞—à_email@example.com

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ! üåø
"""
    await update.message.reply_text(message, parse_mode=ParseMode.MARKDOWN)
```

#### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ bot.py

```python
# –í –º–µ—Ç–æ–¥–µ _setup_handlers() –¥–æ–±–∞–≤—å—Ç–µ:

self.app.add_handler(CommandHandler("about", self.handlers.about_handler))
```

#### –®–∞–≥ 3: –ì–æ—Ç–æ–≤–æ!

```bash
python bot.py
# –¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ /about —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∞–Ω–∞–ª–∏–∑–∞

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ –≤ models.py

```python
class AnalysisMode(Enum):
    """–†–µ–∂–∏–º—ã –∞–Ω–∞–ª–∏–∑–∞"""
    FREE = "free"
    PAID = "paid"
    SUPER = "super"  # –ù–æ–≤—ã–π —Ä–µ–∂–∏–º!
```

#### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–º–ø—Ç—ã –≤ identifier.py

```python
@staticmethod
def _get_prompt(mode: AnalysisMode) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞"""
    if mode == AnalysisMode.FREE:
        return "..."
    elif mode == AnalysisMode.PAID:
        return "..."
    elif mode == AnalysisMode.SUPER:  # –ù–æ–≤—ã–π —Ä–µ–∂–∏–º
        return """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –û–ß–ï–ù–¨ –¢–©–ê–¢–ï–õ–¨–ù–û –∏ –û–ß–ï–ù–¨ –ü–û–î–†–û–ë–ù–û...
        [–≤–∞—à —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç]"""
```

#### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã API

```python
# –í –º–µ—Ç–æ–¥–µ identify() –æ–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

if mode == AnalysisMode.SUPER:
    temperature = 0.3  # –ë–æ–ª–µ–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π
    max_tokens = 1500  # –ï—â–µ –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º API

#### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Claude API

```python
# identifier.py - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å

class ClaudeIdentifierAgent:
    """–ê–≥–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Claude API"""
    
    def __init__(self):
        from anthropic import Anthropic
        self.client = Anthropic(api_key=os.getenv("CLAUDE_API_KEY"))
    
    def identify(self, image_path: str) -> Tuple[AnalysisResult, int]:
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ Claude
        pass
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError: No module named 'telegram'"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-telegram-bot –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install python-telegram-bot
# –ò–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
pip install -r requirements.txt --force-reinstall
```

### –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError: No module named 'openai'"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ openai –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install openai
```

### –ü—Ä–æ–±–ª–µ–º–∞: "PERPLEXITY_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** .env —Ñ–∞–π–ª –Ω–µ —Å–æ–∑–¥–∞–Ω –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–∞.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ .env —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
cat .env | grep PERPLEXITY

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ñ–æ—Ç–æ

**–ü—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –±–æ—Ç–∞ |
| –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π API | –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ |
| –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ | –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Å –ª—É—á—à–∏–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ –≤–∏–¥–∏–º—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ |
| –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ .env —Ñ–∞–π–ª–µ |
| –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±–∞–ª–∞–Ω—Å API | –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ —Å–∞–π—Ç–µ Perplexity |

### –ü—Ä–æ–±–ª–µ–º–∞: "timeout –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ"

**–ü—Ä–∏—á–∏–Ω–∞:** API –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# identifier.py - —É–≤–µ–ª–∏—á–∏—Ç—å timeout:

response = self.client.chat.completions.create(
    ...
    # timeout=120  # –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```python
# identifier.py - —É–º–µ–Ω—å—à–∏—Ç—å max_tokens –≤ FREE —Ä–µ–∂–∏–º–µ:

if mode == AnalysisMode.FREE:
    max_tokens = 500  # –ë—ã–ª–æ 600
else:
    max_tokens = 800  # –ë—ã–ª–æ 1000
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Linux/macOS
chmod +x bot.py
python bot.py

# Windows
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
python bot.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ –Ω–µ –≤–∏–¥–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
python -u bot.py

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
python bot.py > bot.log 2>&1

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f bot.log
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ API –∫–ª—é—á–µ–π

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:**
```env
# .env (–∑–∞—â–∏—â–µ–Ω –≤ .gitignore)
TELEGRAM_BOT_TOKEN=—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω
PERPLEXITY_API_KEY=—Ä–µ–∞–ª—å–Ω—ã–π_–∫–ª—é—á
```

‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```python
# bot.py
TELEGRAM_BOT_TOKEN = "—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω"  # –û–ü–ê–°–ù–û!
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ Git
2. **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å .env —Ñ–∞–π–ª–æ–º —Å –¥—Ä—É–≥–∏–º–∏
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ** —Ä–æ—Ç–∏—Ä—É–π—Ç–µ API –∫–ª—é—á–∏ (–∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü)
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API —Ç–æ–∫–µ–Ω–æ–≤
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production
6. **–ó–∞—â–∏—â–∞–π—Ç–µ** —Å–µ—Ä–≤–µ—Ä –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### .gitignore (–∑–∞—â–∏—Ç–∞)

```gitignore
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
.env
.env.local
.env.*.local

# Python
__pycache__/
*.py[cod]
*$py.class
venv/
env/

# IDE
.vscode/
.idea/
*.swp
*.swo

# –õ–æ–≥–∏
*.log
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π

#### –ï—Å–ª–∏ –∫–ª—é—á —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω

```bash
# 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–û –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–ª—é—á
# .env
# OLD_KEY=—Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á
TELEGRAM_BOT_TOKEN=–Ω–æ–≤—ã–π_–∫–ª—é—á

# 2. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á:
# - Telegram: @BotFather ‚Üí /token ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π
# - Perplexity: https://api.perplexity.ai ‚Üí Revoke old ‚Üí Create new

# 3. –û–±–Ω–æ–≤–∏—Ç–µ .env

# 4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –±–æ—Ç–∞
pkill -f "python bot.py"
python bot.py
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -100 bot.log

# –ü–æ–¥—Å—á–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ –∑–∞ –¥–µ–Ω—å
grep "photo_handler" bot.log | wc -l

# –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫
grep "ERROR" bot.log
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```python
# –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ handlers.py:

import logging

logger = logging.getLogger(__name__)

async def photo_handler(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    logger.info(f"–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ñ–æ—Ç–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip list --outdated

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade -r requirements.txt
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏—è! –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥:

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –≤–∞—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è (`git checkout -b feature/amazing-feature`)
3. Commit –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

### –¢–∏–ø—ã –≤–∫–ª–∞–¥–æ–≤

- üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üìö –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üé® –£–ª—É—á—à–µ–Ω–∏—è UI/UX

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ FAQ** –≤ —Ä–∞–∑–¥–µ–ª–µ "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º"
2. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - README –∏ MIGRATION.md
3. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã** –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - `grep ERROR bot.log`

---

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –±–æ—Ç–∞!

---

**–í–µ—Ä—Å–∏—è:** 5.0 (–ú—É–ª—å—Ç–∏—Ñ–∞–π–ª–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 16.12.2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-Ready  
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** Python 3.9+

